[
  {
    "Id": "843762",
    "ThreadId": "358037",
    "Html": "\r\n<p><span>Here is an excerpt from your example: </span></p>\r\n<p><span>&quot;All these methods accept an optional set of navigation links between entities materializing joins that will be performed when querying.</span><br>\r\n<br>\r\n</p>\r\n<pre>      productRepo.First(p =&gt; p.ProductCategoryId != null , p =&gt; p.ProductCategory);</pre>\r\n<p><br>\r\n<span>&quot;The above syntax loads the product and its associated category in a single SQL query; This approach avoids the N&#43;1 Selects problem, that might appears when using lazy loading.&quot;</span></p>\r\n<p><strong>But what if I want to load entities two levels deep such as this:</strong></p>\r\n<pre>   usersRepo.GetAll(u =&gt; u.UserRoles.Roles);</pre>\r\n<p>This syntax is invalid, since u.UserRoles returns an ICollection in this case.</p>\r\n<p>Is there a way to do it?</p>\r\n",
    "PostedDate": "2012-06-01T18:50:22.797-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "844114",
    "ThreadId": "358037",
    "Html": "<p>Hi cbordeman,</p>\r\n<p>behind the scene those methods use the <a href=\"http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx\">DbExtensions.Include&lt;T, TProperty&gt; method</a>; In the remark section you'll find different kind of usage of this method.</p>\r\n<p>Tonight <span id=\"result_box\" class=\"short_text\" lang=\"en\"><span class=\"hps\">I do not have</span> <span class=\"hps\">access</span> <span class=\"hps\">to my</span> <span class=\"hps\">laptop, so i cannot test if all these usage are supported with EntityFramework.Patterns, but I'll try to do it tomorrow. I'll keep you informed.<br /></span></span></p>\r\n<p>Hope this help</p>",
    "PostedDate": "2012-06-03T14:13:47.443-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "844927",
    "ThreadId": "358037",
    "Html": "<p>cbordeman,</p>\r\n<p>i've implemented your model like that :</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>    <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">class</span> User\r\n    {\r\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">int</span> Id { <span style=\"color: blue;\">get</span>; <span style=\"color: blue;\">set</span>; }\r\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">string</span> Name { <span style=\"color: blue;\">get</span>; <span style=\"color: blue;\">set</span>; }\r\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">virtual</span> ICollection&lt;UserRole&gt; UserRoles { <span style=\"color: blue;\">get</span>; <span style=\"color: blue;\">set</span>; }  \r\n    }\r\n\r\n    <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">class</span> Role\r\n    {\r\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">int</span> Id { <span style=\"color: blue;\">get</span>; <span style=\"color: blue;\">set</span>; }\r\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">string</span> Name { <span style=\"color: blue;\">get</span>; <span style=\"color: blue;\">set</span>; }\r\n    }\r\n\r\n    <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">class</span> UserRole\r\n    {\r\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">int</span> Id { <span style=\"color: blue;\">get</span>; <span style=\"color: blue;\">set</span>; }\r\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">virtual</span> User User { <span style=\"color: blue;\">get</span>; <span style=\"color: blue;\">set</span>; }\r\n        <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">virtual</span> Role Role { <span style=\"color: blue;\">get</span>; <span style=\"color: blue;\">set</span>; }\r\n        <span style=\"color: blue;\">public</span> DateTime Since { <span style=\"color: blue;\">get</span>; <span style=\"color: blue;\">set</span>; }\r\n    }\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>and then you can query it like that&nbsp; :</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre>        IRepository&lt;User&gt; repo = <span style=\"color: blue;\">new</span> Repository&lt;User&gt;(adpt);\r\n\r\n        IEnumerable&lt;User&gt; usr = repo.GetAll(user =&gt; user.UserRoles.Select(l1 =&gt; l1.Role));\r\n</pre>\r\n</div>\r\n</p>\r\n<p>which should correspond to your needs.</p>\r\n<p>For information, here is the generated SQL query :</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\">SELECT</span> \r\n[Project1].[Id] <span style=\"color: blue;\">AS</span> [Id], \r\n[Project1].[Name] <span style=\"color: blue;\">AS</span> [Name], \r\n[Project1].[C1] <span style=\"color: blue;\">AS</span> [C1], \r\n[Project1].[Id1] <span style=\"color: blue;\">AS</span> [Id1], \r\n[Project1].[Since] <span style=\"color: blue;\">AS</span> [Since], \r\n[Project1].[Id2] <span style=\"color: blue;\">AS</span> [Id2], \r\n[Project1].[Name1] <span style=\"color: blue;\">AS</span> [Name1], \r\n[Project1].[User_Id] <span style=\"color: blue;\">AS</span> [User_Id]\r\n<span style=\"color: blue;\">FROM</span> ( <span style=\"color: blue;\">SELECT</span> \r\n\t[Extent1].[Id] <span style=\"color: blue;\">AS</span> [Id], \r\n\t[Extent1].[Name] <span style=\"color: blue;\">AS</span> [Name], \r\n\t[Join1].[Id1] <span style=\"color: blue;\">AS</span> [Id1], \r\n\t[Join1].[Since] <span style=\"color: blue;\">AS</span> [Since], \r\n\t[Join1].[User_Id] <span style=\"color: blue;\">AS</span> [User_Id], \r\n\t[Join1].[Id2] <span style=\"color: blue;\">AS</span> [Id2], \r\n\t[Join1].[Name] <span style=\"color: blue;\">AS</span> [Name1], \r\n\t<span style=\"color: blue;\">CASE</span> <span style=\"color: blue;\">WHEN</span> ([Join1].[Id1] <span style=\"color: blue;\">IS</span> <span style=\"color: blue;\">NULL</span>) <span style=\"color: blue;\">THEN</span> <span style=\"color: magenta;\">CAST</span>(<span style=\"color: blue;\">NULL</span> <span style=\"color: blue;\">AS</span> <span style=\"color: blue;\">int</span>) <span style=\"color: blue;\">ELSE</span> 1 <span style=\"color: blue;\">END</span> <span style=\"color: blue;\">AS</span> [C1]\r\n\t<span style=\"color: blue;\">FROM</span>  [dbo].[Users] <span style=\"color: blue;\">AS</span> [Extent1]\r\n\t<span style=\"color: blue;\">LEFT</span> <span style=\"color: blue;\">OUTER</span> <span style=\"color: blue;\">JOIN</span>  (<span style=\"color: blue;\">SELECT</span> [Extent2].[Id] <span style=\"color: blue;\">AS</span> [Id1], [Extent2].[Since] <span style=\"color: blue;\">AS</span> [Since], [Extent2].[User_Id] <span style=\"color: blue;\">AS</span> [User_Id], [Extent3].[Id] <span style=\"color: blue;\">AS</span> [Id2], [Extent3].[Name] <span style=\"color: blue;\">AS</span> [Name]\r\n\t\t<span style=\"color: blue;\">FROM</span>  [dbo].[UserRoles] <span style=\"color: blue;\">AS</span> [Extent2]\r\n\t\t<span style=\"color: blue;\">LEFT</span> <span style=\"color: blue;\">OUTER</span> <span style=\"color: blue;\">JOIN</span> [dbo].[Roles] <span style=\"color: blue;\">AS</span> [Extent3] <span style=\"color: blue;\">ON</span> [Extent2].[Role_Id] = [Extent3].[Id] ) <span style=\"color: blue;\">AS</span> [Join1] <span style=\"color: blue;\">ON</span> [Extent1].[Id] = [Join1].[User_Id]\r\n)  <span style=\"color: blue;\">AS</span> [Project1]\r\n<span style=\"color: blue;\">ORDER</span> <span style=\"color: blue;\">BY</span> [Project1].[Id] <span style=\"color: blue;\">ASC</span>, [Project1].[C1] <span style=\"color: blue;\">ASC</span>\r\n</pre>\r\n</div>\r\n</p>\r\n<p>I hope this is what you were expecting.</p>",
    "PostedDate": "2012-06-05T04:34:45.887-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "844938",
    "ThreadId": "358037",
    "Html": "<p>Thank you, Fab. &nbsp;Select() is what I needed.</p>",
    "PostedDate": "2012-06-05T05:26:48.453-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]